<launch>

    <arg name="namespace" default="ackermann_vehicle" />
    <arg name="world" default="empty" doc="worlds: [empty, warehouse, checkerboard]" />
    <arg name="cmd_timeout" default="0.5" />
    <arg name="rectify" default="true" />
    <arg name="stereo_view" default="false" />

    <!-- Vehicle pose -->
    <arg name="x" default="0.0" />
    <arg name="y" default="0.0" />
    <arg name="z" default="0.2" />
    <arg name="roll" default="0.0" />
    <arg name="pitch" default="0.0" />
    <arg name="yaw" default="0.0" />

    <!-- World File -->
    <!-- <arg name="world_file" default="$(find my_robot)/worlds/myworld" /> -->

    <!-- load robot description -->
    <include file="$(find racecar)/launch/includes/common/em_3905_description.launch" />

    <!-- Launch Gazebo World -->
    <include file="$(find gazebo_ros)/launch/empty_world.launch">
        <arg name="use_sim_time" value="true" />
        <arg name="debug" value="false" />
        <arg name="gui" value="true" />
        <!-- <arg name="world_name" value="$(arg world_file)" /> -->
    </include>

    <!-- Spawn the vehicle. -->
    <!-- <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" respawn="false" output="screen" args="-urdf -param robot_description -model simplecar 
              -x $(arg x) -y $(arg y) -z $(arg z)
              -R $(arg roll) -P $(arg pitch) -Y $(arg yaw)" /> -->

    <!-- Spawn the vehicle. -->
    <node name="spawn_vehicle" pkg="gazebo_ros" type="spawn_model" args="-urdf -param robot_description -model em_3905
                -x $(arg x) -y $(arg y) -z $(arg z)
                -R $(arg roll) -P $(arg pitch) -Y $(arg yaw)" />
    <!-- Load the joint controllers. One of these publishes the joint states
           to joint_states. -->
    <!-- <node name="controller_spawner" pkg="controller_manager" type="spawner" args="$(find ackermann_vehicle_gazebo)/config/em_3905_joint_ctrlr_params.yaml" /> -->

    <!-- Control the steering, axle, and shock absorber joints. -->
    <!-- <node name="ackermann_controller" pkg="ackermann_vehicle_gazebo" type="ackermann_controller.py">
        <param name="cmd_timeout" value="$(arg cmd_timeout)" />
        <rosparam file="$(find ackermann_vehicle_gazebo)/config/em_3905_ackermann_ctrlr_params.yaml" command="load" />
    </node> -->

    <!-- launch stereo image proc pipeline for rectification -->
    <!-- <group if="$(arg rectify)">
        <node name="stereo_image_proc" pkg="stereo_image_proc" type="stereo_image_proc" ns="stereo_camera" />
        <node name="stereo_view" pkg="image_view" type="stereo_view" output="screen" args="stereo:=stereo_camera image:=/image_rect_color" if="$(arg stereo_view)" />
    </group> -->

    <!-- launch camera calibrator if checkerboard world is selected -->
    <!-- <include if="$(eval world=='checkerboard')" file="$(find ackermann_vehicle_gazebo)/launch/stereo_camera_calibration.launch" /> -->

</launch>
